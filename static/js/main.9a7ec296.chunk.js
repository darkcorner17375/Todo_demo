(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{186:function(e,t,a){},187:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a.n(c),n=a(18),i=a.n(n),r=(a(76),a(77),a(5)),l=a(192),o=a(191),d=a(193),j=a(20),b=a(37),u=a.n(b),m=a(25),O=a.n(m),h=a(38),x=a.n(h),p=a(24),f=a.n(p),v="https://golang-gaintime.herokuapp.com/api/auth/",g=function(e,t,a){return f.a.post(v+"register",{name:e,email:t,password:a})},N=function(e,t){return f.a.post(v+"login",{email:e,password:t}).then((function(e){return""!==e.data.token&&localStorage.setItem("user",JSON.stringify(e.data.data)),console.log(e.data),e.data}))},S=function(){localStorage.removeItem("user")},T=function(){return JSON.parse(localStorage.getItem("user"))},k=a(10),y=a(1),w=function(e){if(!e)return Object(y.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})};var E=function(){var e=Object(k.b)(),t=Object(c.useRef)(),a=Object(c.useRef)(),s=Object(c.useState)(""),n=Object(r.a)(s,2),i=n[0],l=n[1],o=Object(c.useState)(""),d=Object(r.a)(o,2),j=d[0],b=d[1],m=Object(c.useState)(!1),h=Object(r.a)(m,2),p=h[0],f=h[1],v=Object(c.useState)(""),g=Object(r.a)(v,2),S=g[0],T=g[1];return Object(y.jsx)("div",{className:"col-md-12",children:Object(y.jsxs)("div",{className:"card card-container",children:[Object(y.jsx)("h1",{align:"center",children:"Login"}),Object(y.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(y.jsxs)(u.a,{onSubmit:function(c){c.preventDefault(),T(""),f(!0),t.current.validateAll(),0===a.current.context._errors.length?N(i,j).then((function(){e.push("".concat("/Todo_demo","/")),window.location.reload()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();f(!1),T(t)})):f(!1)},ref:t,children:[Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"email",children:"Email"}),Object(y.jsx)(O.a,{type:"email",className:"form-control",name:"email",value:i,onChange:function(e){var t=e.target.value;l(t)},validations:[w]})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"password",children:"Password"}),Object(y.jsx)(O.a,{type:"password",className:"form-control",name:"password",value:j,onChange:function(e){var t=e.target.value;b(t)},validations:[w]})]}),Object(y.jsx)("div",{className:"form-group",children:Object(y.jsxs)("button",{className:"btn btn-primary btn-block",disabled:p,children:[p&&Object(y.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(y.jsx)("span",{children:"Login"})]})}),S&&Object(y.jsx)("div",{className:"form-group",children:Object(y.jsx)("div",{className:"alert alert-danger",role:"alert",children:S})}),Object(y.jsx)(x.a,{style:{display:"none"},ref:a})]})]})})},C=a(30),I=a(8),L=a(3),J=a(194);function A(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:e.token}:{}}var D="https://golang-gaintime.herokuapp.com/api/",F=function(){return f.a.get(D+"todos/",{headers:A()})},R=function(e){return f.a.post(D+"todos/",e,{headers:A()})},_=function(e,t){return f.a.put(D+"todos/".concat(e),t,{headers:A()})},G=function(e){return f.a.delete(D+"todos/".concat(e),{headers:A()})},q=function(e){var t=e.input,a=e.setInput,s=e.todos,n=e.setTodos,i=e.editTodo,r=e.setEditTodo,l=e.initTodoState;e.reciveTodos;Object(c.useEffect)((function(){a(i||l)}),[a,i]);var o=function(e){var c=e.target,s=c.name,n=c.value;a(Object(L.a)(Object(L.a)({},t),{},Object(I.a)({},s,n)))};return Object(y.jsxs)("div",{className:"header",children:[Object(y.jsx)("h1",{children:"Todo - List"}),Object(y.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),i)!function(e,t,a,c){if(null!==JSON.parse(localStorage.getItem("user")))_(e,{id:e,title:t,description:a}).then((function(i){n([{id:i.data.data.id,title:i.data.data.title,description:i.data.data.description}]);var l=s.map((function(s){return s.id===e?{id:e,title:t,description:a,completed:c}:s}));n(l),r(""),console.log(i.data.data)})).catch((function(e){console.log(e)}));else{var i=s.map((function(s){return s.id===e?{id:e,title:t,description:a,completed:c}:s}));n(i),r("")}}(i.id,t.title,t.description,i.completed);else if(null!==JSON.parse(localStorage.getItem("user"))){var c={title:t.title,description:t.description};R(c).then((function(e){n([{id:e.data.data.id,title:e.data.data.title,description:e.data.data.description}].concat(Object(C.a)(s))),a(l)})).catch((function(e){console.log(e)}))}else n([{id:Object(J.a)(),title:t.title,description:t.description,completed:!1}].concat(Object(C.a)(s))),a(l)},children:[Object(y.jsx)("input",{type:"text",placeholder:"Enter a Todo...",className:"task-input",value:t.title,required:!0,onChange:o,name:"title"}),Object(y.jsx)("input",{type:"text",placeholder:"Enter a Description...",className:"task-input",required:!0,value:t.description,onChange:o,name:"description"}),Object(y.jsx)("button",{className:"button-add",type:"submit",children:i?"OK":"Add"})]})]})},P=function(e){var t=e.todos,a=e.setTodos,c=e.setEditTodo;e.reciveTodos;return Object(y.jsx)("div",{children:t.map((function(e){return Object(y.jsxs)("li",{className:"list-item",children:[Object(y.jsx)("input",{type:"text",value:e.title,className:"list-title ".concat(e.completed?"complete":""),onChange:function(e){return e.preventDefault()}}),Object(y.jsxs)("div",{children:[Object(y.jsx)("button",{className:"button-complete task-button",onClick:function(){return function(e){a(t.map((function(t){return t.id===e.id?Object(L.a)(Object(L.a)({},t),{},{completed:!t.completed}):t})))}(e)},children:Object(y.jsx)("i",{className:"fa fa-check-circle"})}),Object(y.jsx)("button",{className:"button-edit task-button",onClick:function(){return function(e){var a=e.id,s=t.find((function(e){return e.id===a}));c(s)}(e)},children:Object(y.jsx)("i",{className:"fa fa-edit"})}),Object(y.jsx)("button",{className:"button-delete task-button",onClick:function(){return function(e){var c=e.id;null!==JSON.parse(localStorage.getItem("user"))?(G(c),a(t.filter((function(e){return e.id!==c})))):a(t.filter((function(e){return e.id!==c})))}(e)},children:Object(y.jsx)("i",{className:"fa fa-trash"})})]})]},e.id)}))})},B=function(){var e={id:"",title:"",description:"",completed:"false"},t=Object(c.useState)(e),a=Object(r.a)(t,2),s=a[0],n=a[1],i=Object(c.useState)([]),l=Object(r.a)(i,2),o=l[0],d=l[1],j=Object(c.useState)(null),b=Object(r.a)(j,2),u=b[0],m=b[1];Object(c.useEffect)((function(){O()}),[]);var O=function(){F().then((function(e){d(e.data.data)})).catch((function(e){console.log(e)}))};return Object(y.jsx)("div",{className:"container-ml",children:Object(y.jsxs)("div",{className:"app-wrapper",children:[Object(y.jsx)("div",{children:Object(y.jsx)(q,{input:s,setInput:n,todos:o,setTodos:d,editTodo:u,setEditTodo:m,initTodoState:e,reciveTodos:O})}),Object(y.jsx)("div",{children:Object(y.jsx)(P,{todos:o,setTodos:d,setEditTodo:m,reciveTodos:O})})]})})},U=function(){var e=T();return Object(y.jsxs)("div",{className:"container",children:[Object(y.jsx)("header",{className:"jumbotron",children:Object(y.jsxs)("h3",{children:[Object(y.jsx)("strong",{children:e.name})," Profile"]})}),Object(y.jsxs)("p",{children:[Object(y.jsx)("strong",{children:"Token:"})," ",e.token.substring(0,20)," ..."," ",e.token.substr(e.token.length-20)]}),Object(y.jsxs)("p",{children:[Object(y.jsx)("strong",{children:"Id:"})," ",e.id]}),Object(y.jsxs)("p",{children:[Object(y.jsx)("strong",{children:"Email:"})," ",e.email]})]})},M=a(69),z=function(e){if(!e)return Object(y.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},H=function(e){if(!Object(M.isEmail)(e))return Object(y.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This is not a valid email."})},K=function(e){if(e.length<3||e.length>20)return Object(y.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The username must be between 3 and 20 characters."})},Y=function(e){if(e.length<6||e.length>40)return Object(y.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 6 and 40 characters."})},Q=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),a=Object(c.useState)(""),s=Object(r.a)(a,2),n=s[0],i=s[1],l=Object(c.useState)(""),o=Object(r.a)(l,2),d=o[0],j=o[1],b=Object(c.useState)(""),m=Object(r.a)(b,2),h=m[0],p=m[1],f=Object(c.useState)(!1),v=Object(r.a)(f,2),N=v[0],S=v[1],T=Object(c.useState)(""),k=Object(r.a)(T,2),w=k[0],E=k[1];return Object(y.jsx)("div",{className:"col-md-12",children:Object(y.jsxs)("div",{className:"card card-container",children:[Object(y.jsx)("h1",{align:"center",children:"Register"}),Object(y.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(y.jsxs)(u.a,{onSubmit:function(a){a.preventDefault(),E(""),S(!1),e.current.validateAll(),0===t.current.context._errors.length&&g(n,d,h).then((function(e){E(e.data.message),S(!0)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();E(t),S(!1)}))},ref:e,children:[!N&&Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"username",children:"Name"}),Object(y.jsx)(O.a,{type:"text",className:"form-control",name:"name",value:n,onChange:function(e){var t=e.target.value;i(t)},validations:[z,K]})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"email",children:"Email"}),Object(y.jsx)(O.a,{type:"email",className:"form-control",name:"email",value:d,onChange:function(e){var t=e.target.value;j(t)},validations:[z,H]})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"password",children:"Password"}),Object(y.jsx)(O.a,{type:"password",className:"form-control",name:"password",value:h,onChange:function(e){var t=e.target.value;p(t)},validations:[z,Y]})]}),Object(y.jsx)("div",{className:"form-group",children:Object(y.jsx)("button",{className:"btn btn-primary btn-block",children:"Sign Up"})})]}),w&&Object(y.jsx)("div",{className:"form-group",children:Object(y.jsx)("div",{className:N?"alert alert-success":"alert alert-danger",role:"alert",children:w})}),Object(y.jsx)(x.a,{style:{display:"none"},ref:t})]})]})})},V=function(){var e=Object(c.useState)(void 0),t=Object(r.a)(e,2),a=t[0],s=t[1];Object(c.useEffect)((function(){var e=T();e&&s(e)}),[]);return Object(y.jsx)("div",{children:Object(y.jsx)(l.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(y.jsxs)(o.a,{children:[Object(y.jsx)(l.a.Brand,{as:j.b,to:"/home",children:"GainTIme"}),Object(y.jsx)(l.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(y.jsxs)(l.a.Collapse,{id:"responsive-navbar-nav",children:[Object(y.jsx)(d.a,{className:"me-auto",children:Object(y.jsx)(d.a.Link,{as:j.b,to:"/home",children:"home"})}),a?Object(y.jsxs)(d.a,{children:[Object(y.jsx)(d.a.Link,{as:j.b,to:"/profile",children:a.name}),Object(y.jsx)(d.a.Link,{as:j.b,to:"/login",onClick:function(){S(),s("")},children:"Logout"})]}):Object(y.jsxs)(d.a,{children:[Object(y.jsx)(d.a.Link,{as:j.b,to:"/login",children:"Login"}),Object(y.jsx)(d.a.Link,{as:j.b,to:"/register",children:"Register"})]})]})]})})})},W=(a(186),function(){return Object(y.jsx)("div",{className:"footer-dark",children:Object(y.jsx)("div",{className:"container",children:Object(y.jsxs)("div",{className:"row  justify-content-center",children:[Object(y.jsxs)("div",{className:"col-md-4 col-sm-6 item",children:[Object(y.jsx)("h4",{children:"MENU \u9078\u9805"}),Object(y.jsxs)("ul",{children:[Object(y.jsx)("li",{children:"Home \u4e3b\u9801"}),Object(y.jsx)("li",{children:"Instructions \u4f7f\u7528\u6559\u5b78"}),Object(y.jsx)("li",{children:"Privacy \u96b1\u79c1\u6b0a\u4fdd\u8b77\u653f\u7b56"}),Object(y.jsx)("li",{children:"Contact \u806f\u7e6b\u6211\u5011"})]})]}),Object(y.jsxs)("div",{className:"col-md-4 col-sm-6 item",children:[Object(y.jsx)("h4",{children:"ABOUT"}),Object(y.jsxs)("ul",{children:[Object(y.jsx)("li",{children:"GainTime"}),Object(y.jsx)("li",{children:"Developer \u958b\u767c\u8005"})]})]}),Object(y.jsxs)("div",{className:"col-md-4 col-sm-6 item text",children:[Object(y.jsx)("h4",{children:"GainTime"}),Object(y.jsx)("p",{children:"GainTime\u662f\u4e00\u500b\u7c21\u6613\u7684\u5f85\u8fa6\u4e8b\u9805\u7db2\u9801\uff0c\u60a8\u53ef\u4ee5\u7121\u9808\u767b\u5165\u76f4\u63a5\u4f7f\u7528\u4f46\u6e05\u55ae\u9805\u76ee\u4e0d\u6703\u5132\u5b58\uff0c\u5982\u9700\u5132\u5b58\u8acb\u8a3b\u518a\u7528\u6236\u4e26\u767b\u5165\u3002"})]}),Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"col item social",children:[Object(y.jsx)("a",{href:"#",children:Object(y.jsx)("i",{className:"fab fa-facebook"})}),Object(y.jsx)("a",{href:"#",children:Object(y.jsx)("i",{className:"fab fa-twitter"})}),Object(y.jsx)("a",{href:"#",children:Object(y.jsx)("i",{className:"fab fa-github"})})]}),Object(y.jsxs)("p",{className:"copyright",children:["GainTime \xa9 ",(new Date).getFullYear(),"  All rights reserved."]})]})]})})})}),X=a(4);var Z=function(){return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)("div",{children:Object(y.jsxs)(j.a,{basename:"/Todo_demo",children:[Object(y.jsx)(V,{}),Object(y.jsxs)(X.c,{children:[Object(y.jsx)(X.a,{exact:!0,path:"/",element:Object(y.jsx)(B,{})}),Object(y.jsx)(X.a,{path:"/login",element:Object(y.jsx)(E,{})}),Object(y.jsx)(X.a,{path:"/register",element:Object(y.jsx)(Q,{})}),Object(y.jsx)(X.a,{exact:!0,path:"/home",element:Object(y.jsx)(B,{})}),Object(y.jsx)(X.a,{exact:!0,path:"/profile",element:Object(y.jsx)(U,{})})]})]})}),Object(y.jsx)("div",{children:Object(y.jsx)(W,{})})]})};i.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(Z,{})}),document.getElementById("root"))},76:function(e,t,a){},77:function(e,t,a){}},[[187,1,2]]]);
//# sourceMappingURL=main.9a7ec296.chunk.js.map